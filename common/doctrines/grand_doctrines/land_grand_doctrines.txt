new_mobile_warfare = {
    folder = land

    name = GRAND_DOCTRINE_MOBILE_WARFARE
    description = GRAND_DOCTRINE_MOBILE_WARFARE_DESC
    icon = GFX_doctrine_mobile_warfare_medium
    available = {
        always = yes
    }

    xp_cost = 0
    xp_type = army

    ai_will_do = {
        base = 1

        modifier = {
            factor = 0
            is_major = no
        }
    }

    tracks = {
        infantry
        combat_support
        armor
        motorized
		support
		operations
    }

    # EFFECTS
    
	army_armor_speed_factor = 0.1
    org_loss_when_moving = -0.2
	enable_tactic = tactic_unexpected_thrust
	category_army = { 
				default_morale = 0.05
                max_organisation = 5
				}

    milestones = {
        {
            #Infantry
            category_light_infantry = {max_organisation = 5}
            dig_in_speed_factor = 0.25
            land_reinforce_rate = 0.05
            enable_tactic = tactic_delay

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = infantry_milestone_var
                        }
                    }
                    set_variable = { infantry_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { infantry_milestone_var = 1 }
                }
            }
        }
        {
            #Artillery/Support
	        category_mobile_artillery = {soft_attack = 0.05 air_attack = 0.05 hard_attack = 0.05}
            enable_tactic = tactic_overwhelming_fire
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = support_milestone_var
                        }
                    }
                    set_variable = { support_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { support_milestone_var = 1 }
                }
            }
        }
        {
            #Armor
            category_all_armor = {max_organisation = 5 default_morale =0.05 breakthrough = 0.1 maximum_speed = 0.1}
            enable_tactic = tactic_blitz

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
        #motorized
        category_mobile_infantry = {max_organisation=5 default_morale = 0.05}
        motorized={
			need = {
				motorized_equipment = -10
			}
		}
		mot_anti_tank_brigade={
			need = {
				motorized_equipment = -5
			}
		}
		mot_anti_air_brigade={
			need = {
				motorized_equipment = -5
			}
		}
		mot_artillery_brigade={
			need = {
				motorized_equipment = -5
			}
		}
		mot_rocket_artillery_brigade={
			need = {
				motorized_equipment = -5
			}
		}
        mechanized={
			need = {
				mechanized_equipment = -5
			}
		}
        effect = {
        custom_effect_tooltip = "Each Mechanized Batallion requires 5 less Mechanized Equipment"
        custom_effect_tooltip = "Each Motorized Batallion requires 10 less Motorized Equipment"
        custom_effect_tooltip = "Each Motorized Artillery requires Batallion 5 less Motorized Equipment"
                if = {
                    limit = {
                        NOT = {
                            has_variable = motorized_milestone_var
                        }
                    }
                    set_variable = { motorized_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { motorized_milestone_var = 1 }
                }
            }
        }
        {
            #support
            category_support_tanks = {soft_attack = 0.05 hard_attack = 0.05}
            category_sp_support_artillery = {soft_attack = 0.05 hard_attack = 0.05}
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = support_milestone_var
                        }
                    }
                    set_variable = { support_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { support_milestone_var = 1 }
                }
            }
        }
        {
            #Operations
            planning_speed = 1
            coordination_bonus = 0.06
            category_army = { 
				max_organisation = 5
				default_morale = 0.05
				}
            enable_tactic = tactic_backhand_blow   

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = operations_milestone_var
                        }
                    }
                    set_variable = { operations_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { operations_milestone_var = 1 }
                }
            }
        }
    }
}
superior_firepower = {
    folder = land

    name = GRAND_DOCTRINE_SUPERIOR_FIREPOWER
    description = GRAND_DOCTRINE_SUPERIOR_FIREPOWER_DESC
    icon = GFX_doctrine_superior_firepower_medium
    available = {
        always = yes
    }

    xp_cost = 0
    xp_type = army

    ai_will_do = {
        base = 1

        modifier = {
            factor = 0
            is_major = no
        }
    }

    tracks = {
        infantry
        combat_support
        armor
        motorized
		support
		operations
    }

    # EFFECTS
    enable_tactic = tactic_overwhelming_fire
    category_army = { 
        soft_attack = 0.05
        hard_attack = 0.025
        air_attack = 0.05
        max_organisation = 5
    }
    
    milestones = {
        {
            #Infantry
            enable_tactic = tactic_elastic_defense
            category_light_infantry = { default_morale = 0.05 soft_attack = 0.1 defense = 0.1}

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = infantry_milestone_var
                        }
                    }
                    set_variable = { infantry_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { infantry_milestone_var = 1 }
                }
            }
        }
        {
            #Artillery/Support
            
            category_line_artillery = { soft_attack = 0.1 hard_attack = 0.1}
            enable_tactic = tactic_barrage

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = support_milestone_var
                        }
                    }
                    set_variable = { support_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { support_milestone_var = 1 }
                }
            }

        }
        {
            #Armor
            enable_tactic = tactic_delay
            category_all_armor = {
                soft_attack = 0.05
                air_attack = 0.05
                breakthrough = 0.05
            }

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #motorized
            category_mobile_infantry = { default_morale = 0.05 soft_attack = 0.1 defense = 0.05}
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #support
            category_support_artillery = {
                soft_attack = 0.1
                hard_attack = 0.1
                breakthrough = 0.1
            }  
            category_support_battalions = {
                max_organisation = 10
            }            
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #Operations
            enable_tactic = tactic_tactical_withdrawal
            land_reinforce_rate = 0.02
            coordination_bonus = 0.04
            category_army = { 
				default_morale = 0.05
				}
            planning_decay_rate_factor = -0.25
            planning_speed = 0.5

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = operations_milestone_var
                        }
                    }
                    set_variable = { operations_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { operations_milestone_var = 1 }
                }
            }
        }

    }
}

grand_battleplan = {
    folder = land

    name = GRAND_DOCTRINE_GRAND_BATTLEPLAN
    description = GRAND_DOCTRINE_GRAND_BATTLEPLAN_DESC
    icon = GFX_doctrine_grand_battleplan_medium
    available = {
        always = yes
    }

    xp_cost = 0
    xp_type = army

    ai_will_do = {
        base = 2
    }

    tracks = {
        infantry
        combat_support
        armor
        motorized
		support
		operations
    }

    # EFFECTS
    enable_tactic = tactic_planned_attack
    max_dig_in_factor = 0.1
    max_planning = 0.1
    command_power_gain = 0.25
    category_army = { 
                max_organisation = 10
				}
    milestones = {
        {
            #Infantry 
            enable_tactic = tactic_elastic_defense
        infantry = {
		
			urban = {
				attack = 0.025
			}
			jungle = {
				attack = 0.025
			}
			mountain = {
				attack = 0.025
			}
			hills = {
				attack = 0.025
			}
			forest = {
				attack = 0.025
			}
		}
		marine = {
		
			urban = {
				attack = 0.025
			}
			jungle = {
				attack = 0.025
			}
			mountain = {
				attack = 0.025
			}
			hills = {
				attack = 0.025
			}
			forest = {
				attack = 0.025
			}
		}
		mountaineers = {
		
			urban = {
				attack = 0.025
			}
			jungle = {
				attack = 0.025
			}
			mountain = {
				attack = 0.025
			}
			hills = {
				attack = 0.025
			}
			forest = {
				attack = 0.025
			}
		}
		paratrooper = {
		
			urban = {
				attack = 0.025
			}
			jungle = {
				attack = 0.025
			}
			mountain = {
				attack = 0.025
			}
			hills = {
				attack = 0.025
			}
			forest = {
				attack = 0.025
			}
		}
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = infantry_milestone_var
                        }
                    }
                    set_variable = { infantry_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { infantry_milestone_var = 1 }
                }
            }
        }
        {
            #Artillery
        artillery_brigade = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
        mot_artillery_brigade = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
        rocket_artillery_brigade = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
        mot_rocket_artillery_brigade = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
        light_sp_artillery_brigade = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
        medium_sp_artillery_brigade = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
        heavy_sp_artillery_brigade= {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
        motorized_rocket_brigade = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
            enable_tactic = tactic_overwhelming_fire

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = support_milestone_var
                        }
                    }
                    set_variable = { support_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { support_milestone_var = 1 }
                }
            }
        }
        {
            #Armor
            enable_tactic = tactic_breakthrough
            light_armor = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
            medium_armor = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}   
            heavy_armor = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
            
        }
        {
            #motorized
            motorized = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
            mechanized = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
            cavalry = {
		
                urban = {
                    attack = 0.025
                }
                jungle = {
                    attack = 0.025
                }
                mountain = {
                    attack = 0.025
                }
                hills = {
                    attack = 0.025
                }
                forest = {
                    attack = 0.025
			}
		}
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #support
            signal_company = { initiative = 0.1 }
            category_support_battalions = { breakthrough = 0.2}
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #Operations
            army_morale = 0.0
            category_army = { 
				max_organisation = 5
				}
            coordination_bonus = 0.08
            max_planning = 0.1
            land_night_attack = 0.1
            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = operations_milestone_var
                        }
                    }
                    set_variable = { operations_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { operations_milestone_var = 1 }
                }
            }
        }
    }
}

mass_assault = {
    folder = land

    name = GRAND_DOCTRINE_MASS_ASSAULT
    description = GRAND_DOCTRINE_MASS_ASSAULT_DESC
    icon = GFX_doctrine_mass_assault_medium
    available = {
        always = yes
    }

    xp_cost = 0
    xp_type = army

    ai_will_do = {
        base = 1
    }

    tracks = {
        infantry
        combat_support
        armor
        motorized
		support
		operations
    }

    # EFFECTS
    no_supply_grace = 48
    out_of_supply_factor = -0.10
    enable_tactic = tactic_relentless_assault
    category_army = { 
				default_morale = 0.1
                max_organisation = 5
				}
                
        infantry ={
            need = {infantry_equipment = -15}
            max_strength = -3}
        mountaineers = {
            need = {support_equipment = -5}
			max_strength = -4}
        paratrooper = {
            need = {support_equipment = -5}
			max_strength = -4}
		marine = {
            need = {support_equipment = -5}
			max_strength = -4}
        artillery_brigade={
            max_strength = -1.5
			need = {
				artillery_equipment = -4
			}
		}
		anti_tank_brigade={
            max_strength = -1.2
			need = {
				anti_tank_equipment  = -4
			}
		}
		anti_air_brigade={
            max_strength = -0.45
			need = {
				anti_air_equipment = -4
			}
		}
    effect = {
            custom_effect_tooltip = "Artillery Batallion needs 4 less and each Anti-Tank and Anti-Air Batallion 2 less Equipment"
            custom_effect_tooltip = "Each Infantry Batallion requires 15 less Infantry Equipment and each special Forces Battalion rquires 5 less support equipment"
                }
    milestones = {
        {
            #Infantry
            enable_tactic = tactic_human_wave_tactics
            category_light_infantry = { default_morale = 0.1 }

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = infantry_milestone_var
                        }
                    }
                    set_variable = { infantry_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { infantry_milestone_var = 1 }
                }
            }
        }
        {
            #Artillery/Support
			category_line_artillery = { default_morale = 0.1 }
            
            enable_tactic = tactic_elastic_defense

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = support_milestone_var
                        }
                    }
                    set_variable = { support_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { support_milestone_var = 1 }
                }
            }
        }
        {
            #Armor
            land_reinforce_rate = 0.02
            category_all_armor = { default_morale = 0.1 breakthrough = 0.05}
            enable_tactic = tactic_overwhelming_fire

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #motorized
            category_mobile_infantry = {default_morale = 0.1 }
            motorized = {
			need = {
				motorized_rocket_equipment = 10
				motorized_equipment = -10
			}
		}
		mechanized = {
			need = {
				motorized_rocket_equipment = 10
				mechanized_equipment = -10
			}
		}
            effect = {
                custom_effect_tooltip = "Motorized and Mechanized Batallions needs 10 less mot/mech and 10 more Katyushas"
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #support
        field_hospital = {
			need = {support_equipment = -5}
		}
		engineer = {
			need = {support_equipment = -5}
		}
		sniper_recon = {
			need = {support_equipment = -5}
		}
		recon = {
			need = {support_equipment = -5}
		}
		signal_company = {
			need = {support_equipment = -5}
		}
		maintenance_company = {
			need = {support_equipment = -5}
		}
        Military_police = {
			need = {support_equipment = -5}
		}
        motorized_Military_police = {
			need = {support_equipment = -5}
		}
            effect = {
                custom_effect_tooltip = "Support Companies require 5 less Support Equipment"
                if = {
                    limit = {
                        NOT = {
                            has_variable = armor_milestone_var
                        }
                    }
                    set_variable = { armor_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { armor_milestone_var = 1 }
                }
            }
        }
        {
            #Operations
            enable_tactic = tactic_backhand_blow
            weekly_casualties_war_support = 0.001
            minimum_training_level = -0.2
            category_army = { 
				default_morale = 0.1
				}
            category_army = { max_organisation = default_morale 0.05 
            coordination_bonus = 0.04

            effect = {
                if = {
                    limit = {
                        NOT = {
                            has_variable = operations_milestone_var
                        }
                    }
                    set_variable = { operations_milestone_var = 1 }
                }
                else = {
                    add_to_variable = { operations_milestone_var = 1 }
                }
            }
        }
    }
}