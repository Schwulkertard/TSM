add_namespace = spain
country_event = {
	id = spain.1
	title = spain.1.t
	desc = spain.1.d
	picture = GFX_report_event_spain_civil_war_soldiers
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = spain.1.a
		trigger = { is_ai = no }
		if = {
			limit = { original_tag = SPR }
			hidden_effect = {
				SPR = {
					activate_mission=SPR_send_troops
				}
				create_corps_commander = {
					name = "Francisco Franco"
					id =1434
					picture = "Portrait_Spain_Francisco_Franco.dds"
					traits = {  panzer_leader infantry_leader panzer_expert trickster expert_improviser trait_engineer organizer}
					skill = 7
					attack_skill = 6
					defense_skill = 3
					planning_skill = 3
					logistics_skill = 4
				}
				GER = {
					army_experience = 200
					air_experience = 150
				}
				JAP = {
					army_experience = 300
					air_experience = 300
					}
				SOV = {
					army_experience = 200
					air_experience = 250}
				ITA = {
					army_experience = 50
					air_experience = 150
				}
				HUN = {
					army_experience = 50
				}
				MAN = {
					army_experience = 50
				}
				YUG = {
					army_experience = 50
				}
				army_experience = 30
				if={limit = {has_global_flag= major_only_scenario}
					country_event = spain.11
				}
				if={limit = {NOT={has_global_flag= major_only_scenario}}
				set_global_flag = spanish_civil_war
				
				SPR = {
					declare_war_on = {
						target = SPN
						type = annex_everything
					}
				}
				SPR = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				SPN = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				GER = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				ITA = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				JAP = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				HUN = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				ROM = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				BUL = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				ENG = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				FRA = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				CAN = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				SAF = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				RAJ = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				AST = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				NZL = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				SOV = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				MEX = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				MAN = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
				SIA = {remove_ideas = peace_training add_ideas = speed3_scw add_ideas = SPR_kindergarten add_timed_idea={ idea = SPR_prep_scw days = 20} }
			}
			}
			custom_effect_tooltip = nationalists_chosen
		}
	}
}
country_event = {
	id = spain.8
	title = spain.8.t
	desc = spain.8.d
	picture = GFX_report_event_spain_civil_war_volunteers_01
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		SPR = {news_event = { id = news.64 }}
		create_corps_commander = {
			name = "Francisco Franco"
			id =1434
			picture = "Portrait_Spain_Francisco_Franco.dds"
			traits = {  panzer_leader panzer_expert trickster expert_improviser trait_engineer organizer}
			skill = 6
			attack_skill = 6
			defense_skill = 3
			planning_skill = 3
			logistics_skill = 4
		}
	}
	option = {
		ai_chance = { factor = 1 }
		name = spain.8.a
		set_capital = { state = 41 }
	}
}
country_event = {
	id = spain.9
	title = spain.9.t
	desc = spain.9.d
	picture = GFX_report_event_election_vote
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		tag = SPR
		date < 1937.1.1
	}
	option = {
		ai_chance = { factor = 1 }
		name = spain.9.a
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
	}
}
country_event = {
	id = spain.20
	title = spain.20.t
	desc = spain.20.d
	picture = GFX_franco
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = spain.20.a
	}
}
country_event = {
	id = spain.88
	title = spain.88.t
	desc = spain.88.d
	picture = GFX_franco
	is_triggered_only = yes
	hidden=yes
	immediate = {
		SPR= {
			every_owned_state= {
				limit = {NOT= {state=41}}
				set_demilitarized_zone = yes
			}
		}
	}
}
country_event = {
	id = spain.11
	title = spain.11.t
	desc = spain.11.d
	picture = GFX_franco
	is_triggered_only = yes
	hidden=yes
	immediate = {
		set_global_flag = end_of_spanish_civil_war
		SPR= {
			annex_country = { target = SPN transfer_troops = no }
			add_ideas = peace_training
			set_capital = { state = 41 }
			delete_unit_template_and_units = { 
				division_template = "District Force"  
				disband = no 
			}
			delete_units = { 
			division_template = "Infantry Division"  
			disband = no 
			}
			set_division_template_lock = {
    				division_template = "Infantry Division"
    				is_locked = no
			}
			set_equipment_fraction = 0
			remove_ideas = speed3_scw
			remove_ideas = SPR_kindergarten
			set_rule = {can_send_volunteers  = no}
			remove_decision = war_bonds
			add_stability = 0.1
			add_war_support = 0.2
			add_equipment_to_stockpile = {
				type = train_equipment_1
				amount = 50
				producer = SPR
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 1000
				producer = SPR
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 7500
				producer = SPR
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 500
				producer = SPR
			}
		}
		
				GER = {
					army_experience = 100
				}
				JAP = {
					army_experience = 200
					}
				SOV = {
					army_experience = 100}
				ITA = {
					army_experience = 100
				}
				every_country={army_experience = 50}
		GER = {
			add_to_faction = SPR
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = SPR_kindergarten
			remove_ideas = Donated_Vol
			remove_ideas = Donated_Vol2
			remove_ideas = Donated_Vol3
			remove_ideas = Donated_Vol4
			remove_ideas = Donated_Vol5
			remove_ideas = Donated_Vol6
		}
		ITA = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = SPR_kindergarten
		}
		JAP = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = SPR_kindergarten
		}
		HUN = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		ROM = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		BUL = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		MAN = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		ENG = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = Donated_Vol
			remove_ideas = Donated_Vol2
			remove_ideas = Donated_Vol3
			remove_ideas = Donated_Vol4
			remove_ideas = Donated_Vol5
			remove_ideas = Donated_Vol6
			remove_ideas = ENG_allied_exped_corp
			remove_ideas = SPR_kindergarten
		}
		FRA = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			add_ideas = FRA_protected_by_the_maginot_line			
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp
			remove_ideas = SPR_kindergarten
		}
		CAN = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		SAF = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		RAJ = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		AST = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		USA = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		MEX = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = ENG_allied_exped_corp2
			remove_ideas = SPR_kindergarten
		}
		SOV = {
			add_ideas = peace_training
			remove_ideas = speed3_scw
			set_rule = {can_send_volunteers  = no}
			remove_ideas = SPR_kindergarten
		}	
	}
}
country_event = {
	id = spain.33
	title = spain.33.t
	desc = spain.33.d
	picture = GFX_report_event_spain_civil_war_volunteers_01
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = spain.33.a
		delete_unit_template_and_units = { division_template = "División de Infantería" }
		delete_unit_template_and_units = { division_template = "División de Caballería" }
		delete_unit_template_and_units = { division_template = "Brigada Montaña" }
		delete_unit_template_and_units = { division_template = "Brigada de Infantería" }
	}
}

country_event = {
	id = spain.1000
	title = spain.1000.t
	desc = spain.1000.d
	picture = GFX_report_event_spain_civil_war_volunteers_01
	is_triggered_only = yes
	trigger = {
		is_scw_minor_country = yes
	}
	option = {
		name = spain.1000.a
		division_template = {
			name = "Spanish Volunteers"
			regiments = {
				light_armor = { x = 0 y = 0 }
				light_armor = { x = 0 y = 1 }
				light_armor = { x = 0 y = 2 }
				light_armor = { x = 0 y = 3 }
				light_armor = { x = 1 y = 0 }
				light_armor = { x = 1 y = 1 }
				light_armor = { x = 1 y = 2 }
				light_armor = { x = 1 y = 3 }
				light_armor = { x = 2 y = 0 }
				light_armor = { x = 2 y = 1 }
				light_armor = { x = 2 y = 2 }
				light_armor = { x = 2 y = 3 }
				motorized = { x = 3 y = 0 }
				motorized = { x = 3 y = 1 }
				motorized = { x = 3 y = 2 }
				motorized = { x = 3 y = 3 }
				motorized = { x = 4 y = 0 }
				motorized = { x = 4 y = 1 }
				motorized = { x = 4 y = 2 }
				motorized = { x = 4 y = 3 }
			}
					
			support = {
				light_tank_recon = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
			}
		}
		random_owned_controlled_state = {
			for_loop_effect = {
			end = 1
				create_unit = {
					division = "name = \"Spanish Volunteers\" division_template = \"Spanish Volunteers\" start_experience_factor = 0.3"
					owner = ROOT
				}
			}
		}
	}
	option = {
		name = spain.1000.b
		division_template = {
			name = "Spanish Legion"
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				artillery_brigade = { x = 0 y = 3 }
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				artillery_brigade = { x = 1 y = 3 }
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				artillery_brigade = { x = 2 y = 3 }
				mountaineers = { x = 3 y = 0 }
				mountaineers = { x = 3 y = 1 }
				mountaineers = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				mountaineers = { x = 4 y = 0 }
				mountaineers = { x = 4 y = 1 }
				mountaineers = { x = 4 y = 2 }
				artillery_brigade = { x = 4 y = 3 }
			}
					
			support = {
				light_tank_recon = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
			}
		}
		random_owned_controlled_state = {
			for_loop_effect = {
			end = 2
				create_unit = {
					division = "name = \"Spanish Legion\" division_template = \"Spanish Legion\" start_experience_factor = 0.3"
					owner = ROOT
				}
			}
		}
	}
}